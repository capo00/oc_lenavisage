/*!
 * Copyright (c) 2019 Unicorn a.s.
 * All rights reserved.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("uu5g04"),require("react"),require("create-react-class"),require("uu5g04-bricks"),require("prop-types"),require("uu_plus4u5g01"),require("module"),require("uu_plus4u5g01-app"),require("uu5g04-forms")):"function"==typeof define&&define.amd?define("oc_lenavisageg01",["uu5g04","react","create-react-class","uu5g04-bricks","prop-types","uu_plus4u5g01","module","uu_plus4u5g01-app","uu5g04-forms"],t):"object"==typeof exports?exports.oc_lenavisageg01=t(require("uu5g04"),require("react"),require("create-react-class"),require("uu5g04-bricks"),require("prop-types"),require("uu_plus4u5g01"),require("module"),require("uu_plus4u5g01-app"),require("uu5g04-forms")):e.LenaVisage=t(e.UU5,e.React,e.createReactClass,e["UU5.Bricks"],e.PropTypes,e.Plus4U5,e[void 0],e["Plus4U5.App"],e["UU5.Forms"])}(window,function(n,r,i,o,a,s,c,u,l){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t,n){e.exports=n(7)},function(e,t,n){var r=n(8),i="undefined"!=typeof document,o=((r?r.uri:i&&(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString();n.p=o.split(/\//).slice(0,-1).join("/")+"/",e.exports=n(11)},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=l},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(1),s=n.n(o),a=n(2),c=n.n(a),u=n(5),l=(n(9),{TAG:"LenaVisage.",CSS:"lenavisage-"});n(3);var m=function(i){for(var e=1;e<arguments.length;e++)if(e%2){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}else Object.defineProperties(i,Object.getOwnPropertyDescriptors(arguments[e]));return i}({},l,{TAG:l.TAG+"App.",CSS:l.CSS+"app-"});n(4);var p=function(i){for(var e=1;e<arguments.length;e++)if(e%2){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}else Object.defineProperties(i,Object.getOwnPropertyDescriptors(arguments[e]));return i}({},l,{TAG:l.TAG+"Routes.",CSS:l.CSS+"routes-"});var f=function(i){for(var e=1;e<arguments.length;e++)if(e%2){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}else Object.defineProperties(i,Object.getOwnPropertyDescriptors(arguments[e]));return i}({},l,{TAG:l.TAG+"Bricks.",CSS:l.CSS+"bricks-"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(){var e=y(["\n        position: absolute;\n        top: -2px;\n        right: -2px;\n        font-size: 1.5em;\n      "]);return h=function(){return e},e}function g(){var e=y(["\n        width: 104px;\n        max-width: 100%;\n        height: 104px;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        position: relative;\n        margin: 4px;\n        border-radius: 4px;\n      \n        &.uu5-bricks-button-outline:focus:not(:hover) {\n          background-color: unset !important;\n        }\n      "]);return g=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=c()({displayName:"Button",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin,r.Common.ColorSchemaMixin,r.Common.ContentMixin],statics:{tagName:f.TAG+"Button",classNames:{main:r.Common.Css.css(g()),info:r.Common.Css.css(h())}},getDefaultProps:function(){return{icon:void 0,onClick:void 0,active:!1,info:void 0}},render:function(){return s.a.createElement(r.Bricks.Button,v({},this.getMainPropsToPass(),{content:null,onClick:this.props.onClick,bgStyle:this.props.active?"filled":"outline",pressed:this.props.active,colorSchema:"primary"}),this.props.info&&s.a.createElement(r.Bricks.Badge,{colorSchema:"white",className:this.getClassName("info")+" uu5-elevation-1",content:this.props.info}),this.props.icon&&s.a.createElement(r.Bricks.Icon,{icon:this.props.icon}),this.getChildren())}}),S=d,b=c()({displayName:"Home",mixins:[r.Common.BaseMixin],statics:{tagName:p.TAG+"Home",classNames:{main:p.CSS+"home"}},render:function(){var e=this;return s.a.createElement(r.Bricks.Div,this.getMainPropsToPass(),s.a.createElement(d,{content:"Zákazníci",onClick:function(){return e.props.onRoute("customers")}}),s.a.createElement(d,{content:"Služby",onClick:function(){return e.props.onRoute("services")}}))}});function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}var B={man:{cut:{name:"Střih",price:100},care:{name:"Péče",price:50}},child:{cut:{name:"Střih",price:{short:60,long:100}},care:{name:"Péče",price:200}},woman:{cut:{name:"Střih",price:{short:200,middle:200,long:200}},care:{name:"Péče",price:{short:150,middle:200,long:250}},melodies:{name:"Melíry",price:{short:200,middle:270,long:400},unit:{volume:30,price:60}},hairSpray:{name:"Přeliv",price:{short:200,middle:230,long:250},unit:{volume:15,price:60}},color:{name:"Barva",price:{short:200,middle:230,long:250},unit:{volume:15,price:40}},bondUltim:{name:"Bond Ultim",unit:{volume:4,price:250}}}},x={woman:"Žena",man:"Muž",child:"Dítě"},E={men:null,child:{short:"Krátké",long:"Dlouhé"},woman:{short:"Krátké",middle:"Střední",long:"Dlouhé"}},j=function(){function r(e,t,n){C(this,r),this.key=e,this.price="object"===k(t.price)?t.price[n]:t.price,this.name=t.name,this.hair=n,t.unit&&(this.unit=t.unit.volume,this.unitPrice=t.unit.price)}return P(r,[{key:"setQuantity",value:function(e){return e&&(this.quantity=e),this}},{key:"getQuantity",value:function(){return this.quantity}},{key:"getSummary",value:function(){var e={name:this.name,sum:this.price};return this.quantity&&(e.quantity=this.quantity,e.unit=this.unit,e.price=this.price,e.sum+=this.quantity*this.unitPrice),e}}]),r}(),w=function(){function e(){C(this,e),this.category=null,this.hair=null,this.services=[]}return P(e,[{key:"setCategory",value:function(e){return this.category=e,this}},{key:"getCategory",value:function(){return this.category}},{key:"getCategoryName",value:function(){return x[this.category]}},{key:"setHair",value:function(e){return this.hair=e,this}},{key:"getHair",value:function(){return this.hair}},{key:"getHairName",value:function(){return E[this.category]?E[this.category][this.hair]:void 0}},{key:"addService",value:function(e){var t=new j(e,B[this.category][e],this.hair);return this.services.push(t),this}},{key:"removeService",value:function(t){var e=this.services.findIndex(function(e){return e.key===t});if(-1<e){var n=this.services[e];return this.services.splice(e,1),n}return null}},{key:"clearServices",value:function(){return this.services.length=0,this}},{key:"getService",value:function(t){return this.services.find(function(e){return e.key===t})}},{key:"listServices",value:function(){return this.services}},{key:"hasService",value:function(e){return!!this.getService(e)}},{key:"getServiceItems",value:function(){return B[this.category]}},{key:"getHairItems",value:function(){return E[this.category]}},{key:"getSummary",value:function(){var n={category:this.getCategoryName()};this.hair&&(n.hair=this.getHairName()),this.services&&(n.services=[]);var r=0;return this.services.forEach(function(e){var t=e.getSummary();n.services.push(t),r+=t.sum}),n.sum=r,n}}]),e}(),N={mt:{"7-7948-1":"MT.CAPEK.ONDREJ.2","23-6204-1":"98234766872277175"},getMTCode:function(){var e=r.Environment.getSession();if(e){var t=e.getIdentity().uuIdentity;return N.mt[t]}throw"User is not logged in."},getBackButton:function(e){return s.a.createElement(r.Bricks.Button,{onClick:e,bgStyle:"transparent"},s.a.createElement(r.Bricks.Icon,{icon:"mdi-arrow-left"}))},getTileButtons:function(t,n){var r=[],e=function(e){r.push(s.a.createElement(d,{key:e,content:t[e],onClick:function(){return n(e)}}))};for(var i in t)e(i);return r}},M=N;function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=c()({displayName:"Category",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin,r.Common.SectionMixin],statics:{tagName:l.TAG+"Category",classNames:{main:l.CSS+"category"}},render:function(){return s.a.createElement(r.Bricks.Section,T({},this.getMainPropsToPass(),{level:2,header:[M.getBackButton(this.props.onBack)," Kategorie"]}),M.getTileButtons(x,this.props.onClick))}});function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=c()({displayName:"Hair",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin],statics:{tagName:l.TAG+"Hair",classNames:{main:l.CSS+"hair"}},render:function(){return s.a.createElement(r.Bricks.Section,_({},this.getMainPropsToPass(),{level:2,header:[M.getBackButton(this.props.onBack)," Vlasy"]}),M.getTileButtons(this.props.hair,this.props.onClick))}});function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=c()({displayName:"Service",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin],statics:{tagName:l.TAG+"Service",classNames:{main:l.CSS+"service"}},getDefaultProps:function(){return{services:{},activeServices:[]}},_getButtons:function(i){var o=this,a=[],e=function(t){var e=o.props.services[t];if(i&&e.unit||!i&&!e.unit){var n=o.props.activeServices.find(function(e){return e.key===t}),r={key:t,content:e.name,active:!!n,onClick:function(){return o.props.onClick(t,i)}};i&&n&&(r.info=n.getQuantity()),a.push(s.a.createElement(S,r))}};for(var t in this.props.services)e(t);return a},render:function(){return s.a.createElement(r.Bricks.Section,G({},this.getMainPropsToPass(),{level:2,header:[M.getBackButton(this.props.onBack)," Služba"]}),this._getButtons(),s.a.createElement("br",null),this._getButtons(!0),this.props.activeServices.length?s.a.createElement(r.Bricks.Div,{className:"right"},s.a.createElement(r.Bricks.Button,{onClick:this.props.onSubmit,size:"l"},s.a.createElement(r.Bricks.Icon,{icon:"mdi-check"}))):null)}});function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=c()({displayName:"Quantity",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin],statics:{tagName:l.TAG+"Quantity",classNames:{main:l.CSS+"quantity"}},render:function(){var t=this;return s.a.createElement(r.Bricks.Section,H({},this.getMainPropsToPass(),{level:2,header:[M.getBackButton(this.props.onBack)," Počet odměrek (".concat(this.props.service.unit.volume,"ml)")]}),[.5,1,1.5,2,2.5,3,3.5,4,4.5].map(function(e){return s.a.createElement(S,{key:e,content:(e+"").replace(".",","),onClick:function(){return t.props.onClick(e)}})}))}});n(10);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(){var e=Q(["\n  border-top: 1px solid black;\n  font-weight: bold;\n"]);return R=function(){return e},e}function z(){var e=Q(["\n  margin-left: 16px;\n"]);return z=function(){return e},e}function K(){var e=Q(["\n  & > div {\n    display: inline-block;\n    \n    &:first-child {\n      width: calc(100% - 100px);\n    }\n    \n    &:last-child {\n      width: 100px;\n      text-align: right;\n    }\n  }\n"]);return K=function(){return e},e}function Q(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var L=r.Common.Css.css(K()),V=r.Common.Css.css(z()),Z=r.Common.Css.css(R()),F=function(e){var t=e.label,n=e.price,r=e.bold,i=e.level,o=[L];return 2===(void 0===i?1:i)&&o.push(V),r&&o.push(Z),s.a.createElement("div",{className:o.join(" ")},s.a.createElement("div",null,t),s.a.createElement("div",null,n," Kč"))},J=c()({displayName:"Confirmation",mixins:[r.Common.BaseMixin,r.Common.ElementaryMixin],statics:{tagName:l.TAG+"Confirmation",classNames:{main:l.CSS+"confirmation"}},_getServices:function(e){var t=this.props.order.listServices().map(function(e){return s.a.createElement("div",{key:e.key},s.a.createElement(F,{label:e.name,price:e.price}),e.quantity&&s.a.createElement(F,{level:2,label:"".concat(e.quantity,"x ").concat(e.unit,"ml"),price:e.quantity*e.unitPrice}))});return t.push(s.a.createElement("div",{key:"result"},s.a.createElement(F,{label:"CELKEM",price:e,bold:!0}))),s.a.createElement("div",null,t)},render:function(){var e=this,t=this.props.order.getSummary(),n=this.props.order.getHairName()||"";return n&&(n=" - ".concat(n.toLowerCase()," vlasy")),s.a.createElement(r.Bricks.Section,U({},this.getMainPropsToPass(),{level:2,header:"Souhrn"}),s.a.createElement(r.Bricks.Section,{className:"uu5-common-padding-s",level:5,header:"".concat(this.props.order.getCategoryName()).concat(n)},this._getServices(t.sum),s.a.createElement(r.Bricks.Button,{onClick:function(){return e.props.onConfirm(t)},content:"Potvrdit"}),s.a.createElement(r.Bricks.Button,{onClick:this.props.onRefuse,content:"Zrušit"})))}}),W={},X=c()({displayName:"Services",mixins:[r.Common.BaseMixin],statics:{tagName:l.TAG+"Services",classNames:{main:l.CSS+"services"}},getInitialState:function(){return{order:new w}},_clear:function(){this.setState(this.getInitialState())},_getService:function(){var n=this,r="man"===this.state.order.getCategory();return s.a.createElement(D,{services:this.state.order.getServiceItems(),activeServices:this.state.order.listServices(),onClick:function(e,t){n.state.order.hasService(e)?(n.state.order.removeService(e),n.setState({state:"service",service:null})):(n.state.order.addService(e),n.setState({state:t?"quantity":"service",service:r?null:n.state.order.getService(e)}))},onSubmit:function(){return n.setState({state:"confirmation"})},onBack:function(){r?(n.state.order.setCategory(null).clearServices(),n.setState({state:null})):(n.state.order.setHair(null).clearServices(),n.setState({state:"category",service:null}))}})},_getContent:function(){var t=this;switch(this.state.state){case"category":return"man"===this.state.order.getCategory()?this._getService():s.a.createElement(A,{hair:this.state.order.getHairItems(),onClick:function(e){t.state.order.setHair(e),t.setState({state:"service"})},onBack:function(){t.state.order.setCategory(null),t.setState({state:null})}});case"service":return this._getService();case"quantity":return s.a.createElement(I,{service:this.state.service,onClick:function(e){t.state.service.setQuantity(e),t.setState({state:"service",service:null})},onBack:function(){t.state.order.removeService(t.state.service),t.setState({state:"service",service:null})}});case"confirmation":return s.a.createElement(J,{order:this.state.order,onConfirm:function(e){console.log(e),W.saveOrder(e),t._clear()},onRefuse:function(){return t.setState({state:"service"})}});default:return s.a.createElement(q,{onClick:function(e){t.state.order.setCategory(e),t.setState({state:"category"})},onBack:function(){return t.props.onRoute("home")}})}},render:function(){return s.a.createElement(r.Bricks.Div,this.getMainPropsToPass(),this._getContent())}});function Y(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""]);return Y=function(){return e},e}r.Environment.changeColorSchema("primary","pink-rich");var $=c()({displayName:"App",mixins:[r.Common.BaseMixin],statics:{tagName:m.TAG+"App",classNames:{main:r.Common.Css.css(Y())}},getInitialState:function(){return{route:"home"}},render:function(){var t=this;switch(this.state.route){case"services":return s.a.createElement(X,{onRoute:function(e){return t.setState({route:e})}});default:return s.a.createElement(b,{onRoute:function(e){return t.setState({route:e})}})}}});function ee(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""]);return ee=function(){return e},e}var te=c()({displayName:"App",mixins:[r.Common.BaseMixin],statics:{tagName:l.TAG+"App",classNames:{main:r.Common.Css.css(ee())}},render:function(){return s.a.createElement(u.App.Spa,this.getMainPropsToPass(),s.a.createElement($,null))}});n.d(t,"App",function(){return te});t.default={App:te};console.log("".concat("oc_lenavisageg01","-").concat("0.1.0"," © Unicorn\nTerms of Use: https://unicorn.com/tou/").concat("oc_lenavisageg01")),i.a.Environment.addRuntimeLibrary({name:"oc_lenavisageg01",version:"0.1.0"})}])});